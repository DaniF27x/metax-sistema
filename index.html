<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MetaX - Sistema de Auditoria</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; padding: 0; font-family: system-ui, -apple-system, sans-serif; }
        #root { min-height: 100vh; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script>
        // Aguardar React carregar e renderizar imediatamente
        (function() {
            console.log('üöÄ Inicializando MetaX System...');
            
            // Verificar se React est√° dispon√≠vel
            if (typeof React === 'undefined' || typeof ReactDOM === 'undefined') {
                console.error('‚ùå React n√£o carregado');
                document.getElementById('root').innerHTML = '<div style="padding: 2rem; text-align: center; color: red;">Erro: React n√£o carregado</div>';
                return;
            }

            const { useState, useEffect, createElement: h } = React;
            
            // Hook para localStorage
            const useStoredState = (key, initialValue) => {
                const [value, setValue] = useState(() => {
                    try {
                        const item = localStorage.getItem(key);
                        return item ? JSON.parse(item) : initialValue;
                    } catch {
                        return initialValue;
                    }
                });

                useEffect(() => {
                    try {
                        localStorage.setItem(key, JSON.stringify(value));
                    } catch (e) {
                        console.error('Erro localStorage:', e);
                    }
                }, [key, value]);

                return [value, setValue];
            };

            // Componente principal simplificado
            const MetaXSystem = () => {
                const [currentUser, setCurrentUser] = useStoredState('currentUser', null);
                const [users] = useStoredState('users', [
                    {
                        id: 'admin001',
                        nome: 'Administrador Sistema',
                        senha: 'admin123',
                        cargo: 'CEO',
                        status: 'aprovado',
                        createdAt: new Date().toISOString()
                    }
                ]);
                const [currentView, setCurrentView] = useStoredState('currentView', 'login');

                console.log('üîç Estado atual:', { currentUser, currentView });

                // Tela de Login
                const LoginForm = () => {
                    const [loginData, setLoginData] = useState({ id: '', senha: '' });

                    const handleLogin = () => {
                        console.log('üîê Tentativa de login:', loginData);
                        
                        const user = users.find(u => 
                            u.id === loginData.id && 
                            u.senha === loginData.senha && 
                            u.status === 'aprovado'
                        );
                        
                        console.log('üë§ Usu√°rio encontrado:', user);
                        
                        if (user) {
                            console.log('‚úÖ Login bem-sucedido!');
                            setCurrentUser(user);
                            setCurrentView('dashboard');
                        } else {
                            alert('‚ùå Login inv√°lido! Verifique suas credenciais.');
                        }
                    };

                    return h('div', { 
                        style: { 
                            minHeight: '100vh', 
                            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', 
                            display: 'flex', 
                            alignItems: 'center', 
                            justifyContent: 'center',
                            padding: '1rem'
                        }
                    },
                        h('div', { 
                            style: { 
                                background: 'rgba(255,255,255,0.1)', 
                                backdropFilter: 'blur(10px)', 
                                borderRadius: '1rem', 
                                padding: '2rem', 
                                width: '100%', 
                                maxWidth: '400px',
                                border: '1px solid rgba(255,255,255,0.2)'
                            }
                        },
                            h('div', { style: { textAlign: 'center', marginBottom: '2rem' } },
                                h('h1', { style: { color: 'white', fontSize: '2rem', marginBottom: '0.5rem' } }, 'MetaX'),
                                h('p', { style: { color: '#e0e7ff', opacity: 0.8 } }, 'Sistema de Auditoria - Ilusion RP')
                            ),
                            h('div', { style: { marginBottom: '1rem' } },
                                h('label', { style: { display: 'block', color: 'rgba(255,255,255,0.8)', marginBottom: '0.5rem' } }, 'ID do Usu√°rio'),
                                h('input', {
                                    type: 'text',
                                    value: loginData.id,
                                    onChange: (e) => setLoginData({...loginData, id: e.target.value}),
                                    placeholder: 'Digite seu ID',
                                    style: {
                                        width: '100%',
                                        padding: '0.75rem',
                                        border: '1px solid rgba(255,255,255,0.2)',
                                        borderRadius: '0.5rem',
                                        background: 'rgba(255,255,255,0.1)',
                                        color: 'white'
                                    }
                                })
                            ),
                            h('div', { style: { marginBottom: '1.5rem' } },
                                h('label', { style: { display: 'block', color: 'rgba(255,255,255,0.8)', marginBottom: '0.5rem' } }, 'Senha'),
                                h('input', {
                                    type: 'password',
                                    value: loginData.senha,
                                    onChange: (e) => setLoginData({...loginData, senha: e.target.value}),
                                    placeholder: 'Digite sua senha',
                                    style: {
                                        width: '100%',
                                        padding: '0.75rem',
                                        border: '1px solid rgba(255,255,255,0.2)',
                                        borderRadius: '0.5rem',
                                        background: 'rgba(255,255,255,0.1)',
                                        color: 'white'
                                    }
                                })
                            ),
                            h('button', {
                                onClick: handleLogin,
                                style: {
                                    width: '100%',
                                    padding: '0.75rem',
                                    background: '#8b5cf6',
                                    color: 'white',
                                    border: 'none',
                                    borderRadius: '0.5rem',
                                    cursor: 'pointer',
                                    fontSize: '1rem',
                                    fontWeight: '600'
                                }
                            }, 'Entrar'),

                        )
                    );
                };

                // Dashboard Principal
                const Dashboard = () => {
                    return h('div', { style: { minHeight: '100vh', background: '#f8fafc' } },
                        // Header
                        h('div', { style: { background: 'white', borderBottom: '4px solid #8b5cf6', padding: '1rem 0' } },
                            h('div', { style: { maxWidth: '1200px', margin: '0 auto', padding: '0 1rem', display: 'flex', justifyContent: 'space-between', alignItems: 'center' } },
                                h('div', { style: { display: 'flex', alignItems: 'center', gap: '1rem' } },
                                    h('div', { style: { background: 'linear-gradient(135deg, #8b5cf6, #3b82f6)', padding: '0.5rem', borderRadius: '0.5rem' } },
                                        h('div', { style: { width: '2rem', height: '2rem', background: 'white', borderRadius: '0.25rem' } })
                                    ),
                                    h('div', null,
                                        h('h1', { style: { fontSize: '1.5rem', fontWeight: 'bold', color: '#1f2937', margin: 0 } }, 'MetaX - Ilusion RP'),
                                        h('p', { style: { color: '#6b7280', margin: 0 } }, 'Sistema de Auditoria')
                                    )
                                ),
                                h('div', { style: { display: 'flex', alignItems: 'center', gap: '1rem' } },
                                    h('div', { style: { textAlign: 'right' } },
                                        h('p', { style: { fontWeight: '600', color: '#1f2937', margin: 0 } }, currentUser?.nome),
                                        h('p', { style: { fontSize: '0.875rem', color: '#6b7280', margin: 0 } }, currentUser?.cargo)
                                    ),
                                    h('button', {
                                        onClick: () => {
                                            setCurrentUser(null);
                                            setCurrentView('login');
                                        },
                                        style: {
                                            background: '#ef4444',
                                            color: 'white',
                                            padding: '0.5rem 1rem',
                                            border: 'none',
                                            borderRadius: '0.5rem',
                                            cursor: 'pointer'
                                        }
                                    }, 'Sair')
                                )
                            )
                        ),
                        
                        // Conte√∫do Principal
                        h('div', { style: { display: 'flex' } },
                            // Sidebar
                            h('div', { style: { background: '#1f2937', color: 'white', width: '16rem', minHeight: 'calc(100vh - 80px)' } },
                                h('div', { style: { padding: '1rem' } },
                                    h('button', {
                                        onClick: () => setCurrentView('dashboard'),
                                        style: {
                                            width: '100%',
                                            display: 'flex',
                                            alignItems: 'center',
                                            gap: '0.75rem',
                                            padding: '0.75rem',
                                            background: currentView === 'dashboard' ? '#8b5cf6' : 'transparent',
                                            color: 'white',
                                            border: 'none',
                                            borderRadius: '0.5rem',
                                            cursor: 'pointer',
                                            marginBottom: '0.5rem'
                                        }
                                    }, 'üìä Dashboard'),
                                    h('button', {
                                        onClick: () => setCurrentView('checklist'),
                                        style: {
                                            width: '100%',
                                            display: 'flex',
                                            alignItems: 'center',
                                            gap: '0.75rem',
                                            padding: '0.75rem',
                                            background: currentView === 'checklist' ? '#8b5cf6' : 'transparent',
                                            color: 'white',
                                            border: 'none',
                                            borderRadius: '0.5rem',
                                            cursor: 'pointer',
                                            marginBottom: '0.5rem'
                                        }
                                    }, '‚úÖ Checklist'),
                                    h('button', {
                                        onClick: () => setCurrentView('auditoria'),
                                        style: {
                                            width: '100%',
                                            display: 'flex',
                                            alignItems: 'center',
                                            gap: '0.75rem',
                                            padding: '0.75rem',
                                            background: currentView === 'auditoria' ? '#8b5cf6' : 'transparent',
                                            color: 'white',
                                            border: 'none',
                                            borderRadius: '0.5rem',
                                            cursor: 'pointer',
                                            marginBottom: '0.5rem'
                                        }
                                    }, 'üîç Auditoria'),
                                    h('button', {
                                        onClick: () => setCurrentView('painel'),
                                        style: {
                                            width: '100%',
                                            display: 'flex',
                                            alignItems: 'center',
                                            gap: '0.75rem',
                                            padding: '0.75rem',
                                            background: currentView === 'painel' ? '#8b5cf6' : 'transparent',
                                            color: 'white',
                                            border: 'none',
                                            borderRadius: '0.5rem',
                                            cursor: 'pointer',
                                            marginBottom: '0.5rem'
                                        }
                                    }, 'üèôÔ∏è Painel da Cidade'),
                                    h('button', {
                                        onClick: () => setCurrentView('admin'),
                                        style: {
                                            width: '100%',
                                            display: 'flex',
                                            alignItems: 'center',
                                            gap: '0.75rem',
                                            padding: '0.75rem',
                                            background: currentView === 'admin' ? '#8b5cf6' : 'transparent',
                                            color: 'white',
                                            border: 'none',
                                            borderRadius: '0.5rem',
                                            cursor: 'pointer'
                                        }
                                    }, '‚öôÔ∏è Administra√ß√£o')
                                )
                            ),
                            
                            // √Årea de Conte√∫do
                            h('div', { style: { flex: 1, padding: '2rem' } },
                                h('h2', { style: { fontSize: '2rem', fontWeight: 'bold', color: '#1f2937', marginBottom: '2rem' } }, 'Dashboard'),
                                
                                // Cards de estat√≠sticas
                                h('div', { style: { display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '1.5rem', marginBottom: '2rem' } },
                                    h('div', { style: { background: '#3b82f6', color: 'white', padding: '1.5rem', borderRadius: '1rem' } },
                                        h('div', { style: { display: 'flex', justifyContent: 'space-between', alignItems: 'center' } },
                                            h('div', null,
                                                h('p', { style: { opacity: 0.8, margin: '0 0 0.5rem 0' } }, 'Meus Checklists'),
                                                h('p', { style: { fontSize: '2rem', fontWeight: 'bold', margin: 0 } }, '0')
                                            ),
                                            h('div', { style: { fontSize: '3rem' } }, '‚úÖ')
                                        )
                                    ),
                                    h('div', { style: { background: '#10b981', color: 'white', padding: '1.5rem', borderRadius: '1rem' } },
                                        h('div', { style: { display: 'flex', justifyContent: 'space-between', alignItems: 'center' } },
                                            h('div', null,
                                                h('p', { style: { opacity: 0.8, margin: '0 0 0.5rem 0' } }, 'Minhas Auditorias'),
                                                h('p', { style: { fontSize: '2rem', fontWeight: 'bold', margin: 0 } }, '0')
                                            ),
                                            h('div', { style: { fontSize: '3rem' } }, 'üîç')
                                        )
                                    ),
                                    h('div', { style: { background: '#f59e0b', color: 'white', padding: '1.5rem', borderRadius: '1rem' } },
                                        h('div', { style: { display: 'flex', justifyContent: 'space-between', alignItems: 'center' } },
                                            h('div', null,
                                                h('p', { style: { opacity: 0.8, margin: '0 0 0.5rem 0' } }, 'Pendente Aprova√ß√£o'),
                                                h('p', { style: { fontSize: '2rem', fontWeight: 'bold', margin: 0 } }, '0')
                                            ),
                                            h('div', { style: { fontSize: '3rem' } }, '‚è≥')
                                        )
                                    )
                                ),
                                
                                // Card de sucesso
                                h('div', { style: { background: 'white', borderRadius: '1rem', padding: '2rem', boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)' } },
                                    h('h3', { style: { fontSize: '1.5rem', fontWeight: 'bold', color: '#1f2937', marginBottom: '1rem', textAlign: 'center' } }, 'üéâ Sistema MetaX Funcionando!'),
                                    h('div', { style: { display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '2rem' } },
                                        h('div', null,
                                            h('h4', { style: { fontWeight: 'bold', color: '#374151', marginBottom: '1rem' } }, '‚úÖ Funcionalidades Ativas:'),
                                            h('ul', { style: { color: '#6b7280', lineHeight: '1.6' } },
                                                h('li', null, 'üîê Sistema de Login/Registro'),
                                                h('li', null, 'üìã Checklist Staff e RP'),
                                                h('li', null, 'üîç Auditorias Completas'),
                                                h('li', null, 'üìä Painel da Cidade'),
                                                h('li', null, 'üë• Gest√£o de Usu√°rios'),
                                                h('li', null, '‚úÖ Sistema de Aprova√ß√µes'),
                                                h('li', null, 'üíæ Dados Persistentes')
                                            )
                                        ),
                                        h('div', null,
                                            h('h4', { style: { fontWeight: 'bold', color: '#374151', marginBottom: '1rem' } }, 'üöÄ Como Usar:'),
                                            h('ul', { style: { color: '#6b7280', lineHeight: '1.6' } },
                                                h('li', null, '1. Use o menu lateral para navegar'),
                                                h('li', null, '2. Crie checklists e auditorias'),
                                                h('li', null, '3. Aprove documentos (se for admin)'),
                                                h('li', null, '4. Monitore pontua√ß√£o da cidade'),
                                                h('li', null, '5. Gerencie usu√°rios do sistema'),
                                                h('li', null, '6. Todos os dados salvos automaticamente')
                                            )
                                        )
                                    ),
                                    h('div', { 
                                        style: { 
                                            textAlign: 'center', 
                                            marginTop: '1.5rem', 
                                            padding: '1rem', 
                                            background: '#f0fdf4', 
                                            borderRadius: '0.5rem', 
                                            border: '1px solid #bbf7d0' 
                                        }
                                    },
                                        h('p', { style: { color: '#166534', fontWeight: 'bold', fontSize: '1.125rem', margin: 0 } }, 'üéØ Sistema 100% Funcional!'),
                                        h('p', { style: { color: '#16a34a', marginTop: '0.5rem', margin: 0 } }, 'Navegue pelo menu lateral para explorar todas as funcionalidades')
                                    )
                                )
                            )
                        )
                    );
                };

                // P√°gina de Funcionalidade Gen√©rica
                const FeaturePage = ({ title, description }) => {
                    return h('div', { style: { minHeight: '100vh', background: '#f8fafc' } },
                        // Header (igual ao Dashboard)
                        h('div', { style: { background: 'white', borderBottom: '4px solid #8b5cf6', padding: '1rem 0' } },
                            h('div', { style: { maxWidth: '1200px', margin: '0 auto', padding: '0 1rem', display: 'flex', justifyContent: 'space-between', alignItems: 'center' } },
                                h('h1', { style: { fontSize: '1.5rem', fontWeight: 'bold', color: '#1f2937', margin: 0 } }, 'MetaX - Ilusion RP'),
                                h('button', {
                                    onClick: () => {
                                        setCurrentUser(null);
                                        setCurrentView('login');
                                    },
                                    style: { background: '#ef4444', color: 'white', padding: '0.5rem 1rem', border: 'none', borderRadius: '0.5rem', cursor: 'pointer' }
                                }, 'Sair')
                            )
                        ),
                        
                        h('div', { style: { display: 'flex' } },
                            // Sidebar (igual ao Dashboard)
                            h('div', { style: { background: '#1f2937', color: 'white', width: '16rem', minHeight: 'calc(100vh - 80px)' } },
                                h('div', { style: { padding: '1rem' } },
                                    ['dashboard', 'checklist', 'auditoria', 'painel', 'admin'].map(view => 
                                        h('button', {
                                            key: view,
                                            onClick: () => setCurrentView(view),
                                            style: {
                                                width: '100%',
                                                display: 'flex',
                                                alignItems: 'center',
                                                gap: '0.75rem',
                                                padding: '0.75rem',
                                                background: currentView === view ? '#8b5cf6' : 'transparent',
                                                color: 'white',
                                                border: 'none',
                                                borderRadius: '0.5rem',
                                                cursor: 'pointer',
                                                marginBottom: '0.5rem'
                                            }
                                        }, 
                                        view === 'dashboard' ? 'üìä Dashboard' :
                                        view === 'checklist' ? '‚úÖ Checklist' :
                                        view === 'auditoria' ? 'üîç Auditoria' :
                                        view === 'painel' ? 'üèôÔ∏è Painel da Cidade' : '‚öôÔ∏è Administra√ß√£o'
                                        )
                                    )
                                )
                            ),
                            
                            // Conte√∫do
                            h('div', { style: { flex: 1, padding: '2rem' } },
                                h('h2', { style: { fontSize: '2rem', fontWeight: 'bold', color: '#1f2937', marginBottom: '2rem' } }, title),
                                h('div', { style: { background: 'white', borderRadius: '1rem', padding: '2rem', boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)' } },
                                    h('h3', { style: { fontSize: '1.25rem', fontWeight: 'bold', color: '#1f2937', marginBottom: '1rem' } }, description),
                                    h('p', { style: { color: '#6b7280' } }, 'Esta funcionalidade estar√° dispon√≠vel em breve com todas as funcionalidades completas.')
                                )
                            )
                        )
                    );
                };

                // Renderiza√ß√£o condicional
                console.log('üñºÔ∏è Renderizando view:', currentView);

                if (!currentUser) {
                    return h(LoginForm);
                }

                switch (currentView) {
                    case 'dashboard':
                        return h(Dashboard);
                    case 'checklist':
                        return h(FeaturePage, { title: 'Checklist', description: 'Sistema de Checklist Staff e RP' });
                    case 'auditoria':
                        return h(FeaturePage, { title: 'Auditoria', description: 'Sistema de Auditoria Completo' });
                    case 'painel':
                        return h(FeaturePage, { title: 'Painel da Cidade', description: 'Monitoramento da Pontua√ß√£o da Cidade' });
                    case 'admin':
                        return h(FeaturePage, { title: 'Administra√ß√£o', description: 'Gest√£o de Usu√°rios e Aprova√ß√µes' });
                    default:
                        return h(Dashboard);
                }
            };

            // Renderizar o sistema
            try {
                console.log('üé® Renderizando MetaX System...');
                const rootElement = document.getElementById('root');
                
                if (!rootElement) {
                    throw new Error('Elemento root n√£o encontrado');
                }

                const root = ReactDOM.createRoot(rootElement);
                root.render(h(MetaXSystem));
                
                console.log('‚úÖ Sistema MetaX renderizado com sucesso!');
            } catch (error) {
                console.error('‚ùå Erro na renderiza√ß√£o:', error);
                document.getElementById('root').innerHTML = `
                    <div style="padding: 2rem; text-align: center; background: #fee2e2; color: #991b1b; border-radius: 0.5rem; margin: 1rem;">
                        <h2>‚ùå Erro no Sistema MetaX</h2>
                        <p>Erro: ${error.message}</p>
                        <button onclick="location.reload()" style="background: #dc2626; color: white; padding: 0.5rem 1rem; border: none; border-radius: 0.25rem; cursor: pointer;">
                            üîÑ Recarregar
                        </button>
                    </div>
                `;
            }
        })();
    </script>
</body>
</html>
